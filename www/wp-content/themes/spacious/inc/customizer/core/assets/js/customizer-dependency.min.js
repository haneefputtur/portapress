!function(t){"use strict";var C=wp.customize,o={controls:{},init:function(){var n=this;n.handleDependency(),n.hideEmptySections(),C.bind("change",function(o,e){n.hasDependentControls(o.id)&&(n.handleDependency(),n.hideEmptySections())})},handleDependency:function(){var i=this,o=C.get();i.checked_controls={},_.each(o,function(o,e){var n=C.control(e);i.checkControlVisibility(n,e)})},checkControlVisibility:function(o,e){var n,i,r,t=C.get();_.isUndefined(o)||void 0!==SpaciousCustomizerControlsToggle[e]&&(n=!1,r=SpaciousCustomizerControlsToggle[e],i=_.isUndefined(r.conditions)?r:r.conditions,r=_.isUndefined(r.operator)?"AND":r.operator,void 0!==i&&(n=this.checkDependency(i,t,r),(this.checked_controls[e]=n)?o.container.removeClass("spacious-hide"):o.container.addClass("spacious-hide")))},checkDependency:function(o,a,c){var l=this,d=!0,g=!1,e=o[0];if(_.isString(e)){var n=o[1],i=o[2];if(!_.isUndefined(SpaciousCustomizerControlsToggle[e])){var o=_.isUndefined(SpaciousCustomizerControlsToggle[e].conditions)?SpaciousCustomizerControlsToggle[e]:SpaciousCustomizerControlsToggle[e].conditions,r=_.isUndefined(SpaciousCustomizerControlsToggle[e].operator)?"AND":SpaciousCustomizerControlsToggle[e].operator;if(!_.isUndefined(o))if(l.checkDependency(o,a,r))C.control(e).container.removeClass("spacious-hide");else if(d=!(g=!0),"AND"==c)return}_.isUndefined(a[e])||g||!d||(r=a[e],d=l.compareValues(r,n,i))}else _.isArray(e)&&(t.each(o,function(o,e){var n=e[0],i=e[1],r=e[2],t=_.isUndefined(a[n])?"":a[n];if(void 0!==SpaciousCustomizerControlsToggle[n]){var s=_.isUndefined(SpaciousCustomizerControlsToggle[n].conditions)?SpaciousCustomizerControlsToggle[n]:SpaciousCustomizerControlsToggle[n].conditions,e=_.isUndefined(SpaciousCustomizerControlsToggle[n].operator)?"AND":SpaciousCustomizerControlsToggle[n].operator;if(!_.isUndefined(s))if(l.checkDependency(s,a,e))d=!0,C.control(n).container.removeClass("spacious-hide");else if(d=!1,"AND"==c)return}else d=!0;if(d)if("AND"==c){if(!l.compareValues(t,i,r))return d=!1}else d=!!l.compareValues(t,i,r)&&(g=!0)}),g&&"OR"==c&&(d=!0));return d},compareValues:function(o,e,n){var i=!1;switch(e){case"===":i=o===n;break;case">":i=n<o;break;case"<":i=o<n;break;case"<=":i=o<=n;break;case">=":i=n<=o;break;case"!=":i=o!=n;break;case"empty":var r=_.clone(o),i=_.isObject(r)||_.isArray(r)?(_.each(r,function(o,e){_.isEmpty(o)&&delete r[e]}),!!_.isEmpty(r)):!(!_.isNull(r)&&""!=r);break;case"not_empty":r=_.clone(o);(_.isObject(r)||_.isArray(r))&&_.each(r,function(o,e){_.isEmpty(o)&&delete r[e]}),i=!_.isEmpty(r);break;case"contains":_.isArray(o)&&-1!==t.inArray(n,o)&&(i=!0);break;default:i=_.isArray(n)?!_.isEmpty(n)&&!_.isEmpty(o)&&_.contains(n,o):o==n}return i},hideEmptySections:function(){t("ul.accordion-section.control-section-spacious_section").each(function(){var o=t(this).attr("id"),e=!1,n=t(this).find(" > .customize-control");0<n.length&&(n.each(function(){t(this).hasClass("spacious-hide")||"none"==t(this).css("display")||(e=!0)}),e?t('.control-section[aria-owns="'+o+'"]').removeClass("spacious-hide"):t('.control-section[aria-owns="'+o+'"]').addClass("spacious-hide"))})},hasDependentControls:function(i){var r=!1;return t.each(SpaciousCustomizerControlsToggle,function(o,e){if(_.isUndefined(e.conditions)){var n=e[0];if(i==n)return void(r=!0)}else{e=e.conditions;t.each(e,function(o,e){e=e[0];i!=e||(r=!0)})}}),r}};t(function(){o.init()})}(jQuery);